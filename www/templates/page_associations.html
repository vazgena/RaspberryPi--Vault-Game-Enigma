<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>associations</title>
    <script src="/static/js/jquery1.8.2.min.js"></script>
    <script src="/static/js/in_house.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/hack.js"></script>
    <script src="/static/js/curved_text.js"></script>
    <script src="http://code.jquery.com/jquery-2.0.2.min.js"></script>

    <link rel='stylesheet prefetch' href='/static/css/roboto.css'>
    <link rel='stylesheet prefetch' href='/static/css/font-awesome.min.css'>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/inhouse.css?version=.01.7" rel="stylesheet">

</head>
<body>
    {% if flag == 1 %}
        <script>
        function alert_error(){
                    alert("Error you selected the same trackers, try again");
                }
                 alert_error();
        </script>
    {% endif %}


    <div id="div3" style=" margin-left: 5%; display: none; position: fixed; top: 0;  left: 0;
                 width: 600px; height: 500px; ">

        <form style="  margin-left: 25%;" action="/associations" method="POST">
            <p style="  margin-left: 10%; margin-top: 30%;">Front - Back</p>
            <select style="margin-left: 25 %; margin-top: 10px" name="font" id="Front2">
                <option id="options1" ></option>
                {% for i in name_tracker %}
                    <option value="{{i}}">{{i}}</option>
                {% endfor %}
            </select>
            <select  style="margin-left: 20px;" name="tail" id="Toil2">
                <option id="options2" ></option>
                {% for i in name_tracker %}
                    {% if i != name_tracker[0] %}
                        <option value="{{i}}">{{i}}</option>
                    {% endif %}
                {% endfor %}
                        <option value="{{name_tracker[0]}}">{{name_tracker[0]}}</option>
            </select>
            <p></p>
            <input style="margin-top: 40px; margin-left: 12%;  background-color: white; box-shadow: 0px 2px 2px 0px #000000" value="Add" type="submit">
            <button onmousedown="noviewDiv3()" style="margin-left: 20px; background-color: white; box-shadow: 0px 2px 2px 0px #000000">Cancel</button>
        </form>

    </div>


    <div id="main" style=" margin-left: 5%; display: block; position: fixed; top: 0;  left: 0;
                 width: 600px; height: 400px; ">
        <h1 align="center"><font size="6" face="monaco">Current associations</font></h1>
                <p style="  margin-left: 25%;">Front - Back</p>
                <p><select style="  margin-left: 25%; width: 300px;" size="7" id="selectId" onchange="change()" name = "delete">
                {% for i in full_trackers %}
                    <option value="{{i}}">{{i}}</option>
                {% endfor %}
                </select></p>

        <button onclick="location.href='/trackernames'" style="margin-top: 40px; margin-left: 15%; background-color: white; box-shadow: 0px 2px 2px 0px #000000">Find new trackers</button>
        <button   onclick="viewDiv3()" disabled id ="b2"   style="margin-left: 5%; background-color: white; box-shadow: 0px 2px 2px 0px #000000">
            Edit</button>
        <button onclick="deletetrackers()" id ="b3" disabled style="margin-left: 5%; background-color: white; box-shadow: 0px 2px 2px 0px #000000">
            Delete</button>

    </div>
<script>
    function viewDiv3(){
        document.getElementById("div3").style.display = "block";
        document.getElementById("main").style.display = "none";

    };
    function change() {
        var butt2 = document.getElementById("b2");
        butt2.disabled = false;
        var butt3 = document.getElementById("b3");
        butt3.disabled = false;
        var select = document.getElementById("selectId");
        var value2 = select.options[select.selectedIndex].value;
        let arr = value2.split(' ')
        document.getElementById("options1").innerHTML = arr[0];
        document.getElementById("options2").innerHTML = arr[1];

    }

    function noviewDiv3(){
        document.getElementById("div3").style.display = "none";
        document.getElementById("main").style.display = "block";
        };

    function update_page(){
         $(location).attr('href', "/associations");
    }

    function deletetrackers() {
        var r = confirm("Are you sure you want to delete this pair ?");
        if (r == true) {
            var reset_site = "/associations";
            var select2 = document.getElementById("selectId");
            var value2 = select2.options[select2.selectedIndex].value;


            $.ajax({
                type: 'POST',
                url: reset_site,
                data: {
                    'delete': value2
                },
                complete: update_page
            });
        }
    }
    </script>
</body>
</html>
